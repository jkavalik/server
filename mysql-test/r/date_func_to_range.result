drop table if exists t1;
create table t1 (a char(16), b date, c datetime, key(b), key(c));
insert into t1 SET a='test 2000-01-01', b='2000-01-01', c='2000-01-01';
insert into t1 SET a='test 2000-01-01', b='2000-01-01', c='2000-01-01 21:55:13';
explain select * from t1 where c = '2000-01-01';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ref	c	c	6	const	1	
select * from t1 where c = '2000-01-01';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
explain select * from t1 where b = '2000-01-01';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ref	b	b	4	const	1	
select * from t1 where b = '2000-01-01';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where date(c) = '2000-01-01';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	range	c	c	6	NULL	1	Using index condition
select * from t1 where date(c) = '2000-01-01';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where c between '2000-01-01' and '2000-01-02';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	range	c	c	6	NULL	1	Using index condition
select * from t1 where c between '2000-01-01' and '2000-01-02';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where date(b) = '2000-01-01';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	range	b	b	4	NULL	1	Using index condition
select * from t1 where date(b) = '2000-01-01';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where year(b) = 2000;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	range	b	b	4	NULL	1	Using index condition
select * from t1 where year(b) = 2000;
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where 2000 = year(b);
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	range	b	b	4	NULL	1	Using index condition
select * from t1 where 2000 = year(b);
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where '2000-01-01' = date(c);
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	range	c	c	6	NULL	1	Using index condition
select * from t1 where '2000-01-01' = date(c);
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 where month(b) = 1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	2	Using where
select * from t1 where month(b) = 1;
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 ignore index(c) where date(c) = '2000-01-01';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	2	Using where
select * from t1 ignore index(c) where date(c) = '2000-01-01';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
explain select * from t1 ignore index(c) where c between '2000-01-01' and '2000-01-02';
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	2	Using where
select * from t1 ignore index(c) where c between '2000-01-01' and '2000-01-02';
a	b	c
test 2000-01-01	2000-01-01	2000-01-01 00:00:00
test 2000-01-01	2000-01-01	2000-01-01 21:55:13
drop table t1;
